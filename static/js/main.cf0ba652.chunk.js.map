{"version":3,"sources":["services/pixabayApi.js","components/Layout.js","components/Notification.js","components/Modal.js","components/SearchBar.js","components/Spinner.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/App.js","index.js"],"names":["axios","defaults","baseURL","key","searchQuery","a","async","page","get","params","q","image_type","orientation","per_page","data","Container","styled","div","Layout","children","Text","p","Notification","message","Overlay","ModalWindow","Modal","closeModalOnESC","code","props","closeModal","stopPropagationOnModal","e","stopPropagation","window","addEventListener","this","removeEventListener","onClick","Component","Header","header","SearchForm","form","Button","button","Label","span","Input","input","SearchBar","state","inputValue","handleInput","value","target","setState","handleSubmit","preventDefault","handleSearchFormSubmit","onSubmit","type","onChange","placeholder","autocomplete","autoFocus","required","name","SpinnerContainer","Spinner","color","height","width","ListItem","li","Image","img","ImageGalleryItem","imagesForList","tags","largeImageURL","onImageClick","alt","src","defaultProps","images","List","ul","ImageGallery","listOfImages","map","id","webformatURL","App","modalImage","error","hasMore","totalOfImages","fetchImages","prevState","length","pixadayApi","incommingImages","hits","total","openModalOnSelectImage","largeImage","query","prevProps","initialLoad","loadMore","loader","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.cf0ba652.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\n// const sorryCors = 'https://cors-anywhere.herokuapp.com/';\r\naxios.defaults.baseURL = `https://pixabay.com/api`;\r\nconst key = '14527568-6591a78188764a7d597b0a4aa';\r\n\r\nconst fetchImagesWithQuery = async (searchQuery, page = 0) => {\r\n  const { data } = await axios.get('/', {\r\n    params: {\r\n      q: searchQuery,\r\n      page: page,\r\n      key,\r\n      image_type: 'photo',\r\n      orientation: 'horizontal',\r\n      per_page: 12,\r\n    },\r\n  });\r\n\r\n  return data;\r\n};\r\n\r\nexport default {\r\n  fetchImagesWithQuery,\r\n};\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  grid-gap: 16px;\r\n  padding-bottom: 24px;\r\n`;\r\n\r\nconst Layout = ({ children }) => <Container>{children}</Container>;\r\n\r\nexport default Layout;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Text = styled.p`\r\n  display: inline-block;\r\n  margin: 0 auto;\r\n  font-weight: 700;\r\n  margin-top: 8rem;\r\n  font-size: 5rem;\r\n`;\r\n\r\nfunction Notification({ message }) {\r\n  return <Text>{message}</Text>;\r\n}\r\n\r\nexport default Notification;\r\n","import React, { Component } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Overlay = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n  z-index: 1200;\r\n`;\r\n\r\nconst ModalWindow = styled.div`\r\n  max-width: calc(100vw - 48px);\r\n  max-height: calc(100vh - 24px);\r\n`;\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.closeModalOnESC);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.closeModalOnESC);\r\n  }\r\n\r\n  closeModalOnESC = ({ code }) => {\r\n    if (code !== 'Escape') {\r\n      return;\r\n    }\r\n    this.props.closeModal();\r\n  };\r\n\r\n  stopPropagationOnModal = e => {\r\n    e.stopPropagation();\r\n  };\r\n\r\n  render() {\r\n    const { children, closeModal } = this.props;\r\n    return (\r\n      <Overlay onClick={closeModal}>\r\n        <ModalWindow onClick={this.stopPropagationOnModal}>\r\n          {children}\r\n        </ModalWindow>\r\n      </Overlay>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Header = styled.header`\r\n  top: 0;\r\n  left: 0;\r\n  position: sticky;\r\n  z-index: 1100;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 64px;\r\n  padding-right: 24px;\r\n  padding-left: 24px;\r\n  padding-top: 12px;\r\n  padding-bottom: 12px;\r\n  color: #fff;\r\n  background-color: #3f51b5;\r\n  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2),\r\n    0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);\r\n`;\r\n\r\nconst SearchForm = styled.form`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  max-width: 60rem;\r\n  background-color: #fff;\r\n  border-radius: 3px;\r\n  overflow: hidden;\r\n  transition: box-shadow 0.2s linear;\r\n\r\n  &:hover,\r\n  &:focus {\r\n    box-shadow: 0px 2px 8px 1px rgba(0, 0, 0, 0.75);\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  display: inline-block;\r\n  width: 5.6rem;\r\n  height: 5rem;\r\n  border: 0;\r\n  border-top-right-radius: 0.3rem;\r\n  border-bottom-right-radius: 0.3rem;\r\n  background-image: url('https://image.flaticon.com/icons/svg/149/149852.svg');\r\n  background-size: 40%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-color: #d5d7db;\r\n  opacity: 0.6;\r\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\r\n  cursor: pointer;\r\n  outline: none;\r\n\r\n  &:hover,\r\n  &:focus {\r\n    opacity: 1;\r\n    background-color: #bbc0c9;\r\n  }\r\n\r\n  &:active {\r\n    opacity: 0.8;\r\n  }\r\n`;\r\n\r\nconst Label = styled.span`\r\n  position: absolute;\r\n  width: 1px;\r\n  height: 1px;\r\n  padding: 0;\r\n  overflow: hidden;\r\n  clip: rect(0, 0, 0, 0);\r\n  white-space: nowrap;\r\n  clip-path: inset(50%);\r\n  border: 0;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  display: inline-block;\r\n  width: 100%;\r\n  height: 5rem;\r\n  font-size: 2rem;\r\n  background-color: snow;\r\n  border: none;\r\n  outline: none;\r\n  padding-left: 1.4rem;\r\n  padding-right: 1rem;\r\n\r\n  &::placeholder {\r\n    font-size: 2rem;\r\n  }\r\n`;\r\n\r\nclass SearchBar extends Component {\r\n  state = {\r\n    inputValue: '',\r\n  };\r\n\r\n  handleInput = ({ target: { value } }) => {\r\n    this.setState({\r\n      inputValue: value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    const { inputValue } = this.state;\r\n    this.props.handleSearchFormSubmit(inputValue);\r\n\r\n    this.setState({\r\n      inputValue: '',\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { inputValue } = this.state;\r\n\r\n    return (\r\n      <Header>\r\n        <SearchForm onSubmit={this.handleSubmit}>\r\n          <Input\r\n            type=\"text\"\r\n            value={inputValue}\r\n            onChange={this.handleInput}\r\n            placeholder=\"Search images and photos\"\r\n            autocomplete=\"off\"\r\n            autoFocus\r\n            required\r\n            name=\"searchInput\"\r\n          ></Input>\r\n          <Button type=\"submit\">\r\n            <Label> Search </Label>\r\n          </Button>\r\n        </SearchForm>\r\n      </Header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBar;\r\n","import React from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport styled from 'styled-components';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nconst SpinnerContainer = styled.div`\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  top: 30%;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  position: fixed;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 50%;\r\n  z-index: 1100;\r\n  width: 18rem;\r\n  height: 18rem;\r\n  pointer-events: none;\r\n`;\r\n\r\nfunction Spinner() {\r\n  return (\r\n    <SpinnerContainer>\r\n      <Loader type=\"ThreeDots\" color=\"#ff1212\" height={144} width={144} />\r\n    </SpinnerContainer>\r\n  );\r\n}\r\n\r\nexport default Spinner;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\n\r\nconst ListItem = styled.li`\r\n  border-radius: 2px;\r\n  box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2),\r\n    0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 2px 1px -1px rgba(0, 0, 0, 0.12);\r\n  animation: fade 1.5s ease-in-out 1 normal forwards;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 100%;\r\n  height: 260px;\r\n  object-fit: cover;\r\n  transition: transform 250ms cubic-bezier(0.4, 0, 0.2, 1);\r\n\r\n  &:hover {\r\n    transform: scale(1.03);\r\n    cursor: zoom-in;\r\n  }\r\n`;\r\n\r\nfunction ImageGalleryItem({\r\n  imagesForList,\r\n  tags,\r\n  largeImageURL,\r\n  onImageClick,\r\n}) {\r\n  return (\r\n    <ListItem>\r\n      <Image\r\n        alt={tags}\r\n        src={imagesForList}\r\n        onClick={() => onImageClick(largeImageURL)}\r\n      ></Image>\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nImageGalleryItem.defaultProps = {\r\n  images:\r\n    'https://www.salonlfc.com/wp-content/uploads/2018/01/image-not-found-scaled.png',\r\n  tags: '',\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  images: PropTypes.string,\r\n  tags: PropTypes.string,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\n\r\nconst List = styled.ul`\r\n  display: grid;\r\n  max-width: calc(100vw - 48px);\r\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\r\n  grid-gap: 16px;\r\n  margin-top: 0;\r\n  margin-bottom: 0;\r\n  padding: 0;\r\n  list-style: none;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n`;\r\n\r\nfunction ImageGallery({ listOfImages, onImageClick }) {\r\n  return (\r\n    <List>\r\n      {listOfImages.map(({ id, largeImageURL, webformatURL, tags }) => (\r\n        <ImageGalleryItem\r\n          key={id}\r\n          tags={tags}\r\n          imagesForList={webformatURL}\r\n          largeImageURL={largeImageURL}\r\n          onImageClick={onImageClick}\r\n        ></ImageGalleryItem>\r\n      ))}\r\n    </List>\r\n  );\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.arrayOf(PropTypes.object),\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\nimport pixadayApi from '../services/pixabayApi';\nimport Layout from './Layout';\nimport Notification from './Notification';\nimport Modal from './Modal';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport SearchBar from './SearchBar';\nimport Spinner from './Spinner';\nimport ImageGallery from './ImageGallery';\nimport '../base.css';\n\nclass App extends Component {\n  state = {\n    images: [],\n    page: 1,\n    searchQuery: '',\n    modalImage: '',\n    error: null,\n    hasMore: false,\n    totalOfImages: 500,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevState.searchQuery;\n    const nextQuery = this.state.searchQuery;\n\n    if (prevQuery !== nextQuery) {\n      return this.fetchImages();\n    }\n  }\n\n  fetchImages = async () => {\n    const { page, searchQuery, images, totalOfImages } = this.state;\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n    if (images.length === totalOfImages) {\n      return;\n    }\n    try {\n      this.setState({\n        hasMore: true,\n      });\n      const incommingImages = await pixadayApi.fetchImagesWithQuery(\n        searchQuery,\n        page,\n      );\n      this.setState(prevState => ({\n        images: [...prevState.images, ...incommingImages.hits],\n        totalOfImages: incommingImages.total,\n      }));\n      // console.log(`IMAGES===${images.map(item => item.id)}`);\n      // console.log(`SETSET===${[...new Set(images.map(item => item.id))]}`);\n    } catch (error) {\n      this.setState({ error });\n    } finally {\n      this.setState({\n        hasMore: false,\n      });\n    }\n  };\n\n  openModalOnSelectImage = largeImage => {\n    this.setState({\n      modalImage: largeImage,\n    });\n  };\n\n  closeModal = () => {\n    return this.setState({\n      modalImage: '',\n    });\n  };\n\n  handleSearchFormSubmit = query => {\n    this.setState({\n      hasMore: true,\n      searchQuery: query,\n      images: [],\n      page: 1,\n      totalOfImages: 500,\n    });\n  };\n\n  render() {\n    const { hasMore, images, error, modalImage } = this.state;\n\n    return (\n      <Layout>\n        <SearchBar handleSearchFormSubmit={this.handleSearchFormSubmit} />\n        {error && (\n          <Notification\n            message={`Whoops... something went wrong: ${error.message}`}\n          />\n        )}\n        <InfiniteScroll\n          initialLoad={false}\n          loadMore={this.fetchImages}\n          hasMore={hasMore}\n          loader={<Spinner key={'Spinner'} />}\n        >\n          <ImageGallery\n            onImageClick={this.openModalOnSelectImage}\n            listOfImages={images}\n          />\n        </InfiniteScroll>\n        {modalImage && (\n          <Modal closeModal={this.closeModal}>\n            <img src={modalImage} alt=\"\" />\n          </Modal>\n        )}\n      </Layout>\n    );\n  }\n}\n\n// {loading && <Spinner />}\n// {images.length > 0 && (\n//   <ImageGallery\n//     onImageClick={this.openModalOnSelectImage}\n//     listOfImages={images}\n//   />\n// )}\n// {images.length > 0 && !allImagesGotten && (\n//   <IntObsInfiniteScroll fetchImages={this.fetchImages} />\n// )}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.querySelector('#root'));\n"],"sourceRoot":""}